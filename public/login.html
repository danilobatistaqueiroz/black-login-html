<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
  <link rel="icon" type="image/x-icon" href="discord.ico">
  <link href="login.css" rel="stylesheet" />
  <script src="./formatPhoneNumber.js"></script>
</head>

<body>

  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
    integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
    integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
    crossorigin="anonymous"></script>

  <form action="dashboard.html" method="get">
    <div class="login-box">
      <div class="box-fields">
        <div class="row">
          <h3>Welcome friend!</h3>
        </div>
        <div class="row">
          <span>Here you'll find amazing things!</span>
        </div>
        <div class="row label">
          EMAIL OR PHONE NUMBER
        </div>
        <div class="row">
          <input type="email" class="form-control" id="emailphone" name="emailphone" 
          value="33333+88" minlength="4" 
          oninvalid="this.setCustomValidity('Enter a valid email')" 
          oninput="setCustomValidity('')" required>
        </div>
        <div class="row label">
          PASSWORD
        </div>
        <div class="row">
          <input type="password" class="form-control" id="password" 
          name="password" value="xxxxxxxxxxxxxxx" minlength="4" required>
          <i class="far fa-eye" id="togglePassword" style="margin-left: -30px; cursor: pointer;"></i>
        </div>
        <div class="row">
          <a href="#" onclick="sendLinkPassword()">Forgot your password?</a>
        </div>
        <div class="row">
          <button type="submit" onclick="return send()" class="btn btn-primary">Login</button>
        </div>
        <div class="row">
          <div class="register">Need an account? <a href="register.html">Register</a></div>
        </div>
      </div>
      <div class="box-social">
        <div class="vl"></div>
        <span>Login with Social Media</span>
        <div class="spaces"></div>
          <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans" />
          <div class="face-btn text-face">
            <div class="icon-wrapper">
              <img class="logo-icon"
                src="https://upload.wikimedia.org/wikipedia/en/0/04/Facebook_f_logo_%282021%29.svg" />
            </div>
            <p class="btn-text"><b>Facebook</b></p>
          </div>
          <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans" />
          <div class="google-btn text-google">
            <div class="icon-wrapper">
              <img class="logo-icon"
                src="https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg" />
            </div>
            <p class="btn-text"><b>Google</b>&nbsp;&nbsp;&nbsp;&nbsp;</p>
          </div>
          <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans" />
          <div class="git-btn text-git">
            <div class="icon-wrapper">
              <img class="logo-icon"
                src="https://upload.wikimedia.org/wikipedia/commons/9/91/Octicons-mark-github.svg" />
            </div>
            <p class="btn-text"><b>Github</b>&nbsp;&nbsp;&nbsp;&nbsp;</p>
          </div>
      </div>
    </div>
  </form>

  <div id="basicToast" class="toast position-absolute top-0 end-0" role="alert" aria-live="assertive" aria-atomic="true"
    data-bs-delay="3000">
    <div class="toast-header">
      <div class="blue rounded me-2"></div>
      <strong class="me-auto">Discord</strong>
      <small>login</small>
      <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
  </div>

</body>
<script>
  document.querySelector('#togglePassword').addEventListener('click', function (e) {
    let password = document.querySelector("#password");
    password.type = password.type === 'password' ? 'text' : 'password';
    this.classList.toggle('fa-eye-slash');
  });
  let emailphone = document.querySelector('#emailphone');
  emailphone.addEventListener('keydown', e => {
    if(e.key=="Backspace" || e.key=="Delete") {
      return;
    }
    emailphone.value=onChangePhoneNumber(emailphone.value);
  });
  emailphone.addEventListener('focusout', e => {
    let isphonenum = /^[\d+()-.]/g.test(emailphone.value);
    if (isphonenum) {
      emailphone.type="text";
    } else {
      emailphone.type="email";
    }
  });
  function sendLinkPassword() {
    let modal = bootstrap.Modal.getOrCreateInstance(document.querySelector('#exampleModal'))
    modal.show();
  }
  function send() {
    let password = document.querySelector('#password');
    if(password.value==''){
      password.style['box-shadow']='0 0 5px 1px red';
    }
    let emailphone = document.querySelector('#emailphone').value;
    if(emailphone[0]=='+' || emailphone[0]=='(' || /^[\d]+$/.test(emailphone)) {
      let isphonenum = emailphone.match(/^(\+{0,})(\d{0,})([(]{1}\d{1,3}[)]{0,}){0,}(\s?\d+|\+\d{2,3}\s{1}\d+|\d+){1}[\s|-]?\d+([\s|-]?\d+){1,2}(\s){0,}$/gm);
      let isnumbers = /^[\d]+$/.test(emailphone)
      if(isphonenum!=null || isnumbers) 
        return true
      else {
        document.querySelector('#emailphone').style['box-shadow']='0 0 5px 1px red';
        return false
      }
    } else {
      let isemail = emailphone.match(/^[a-zA-Z.@]/g);
      if(isemail)
        return true
      else {
        document.querySelector('#emailphone').style['box-shadow']='0 0 5px 1px red';
        return false
      }
    }
  }
  let validationFields = ['password','emailphone'];
  let allValidationFields = validationFields.map(f=>document.querySelector('#'+f));
  allValidationFields.map(v => {
    v.addEventListener('focus', e => {
      v.style['box-shadow']='none';
    });
  });
</script>
</html>

<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" style="transform: translateY(20%)!important;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Password Sent!</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        A new password was sent in your email!
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal" style="width:100px;">OK</button>
      </div>
    </div>
  </div>
</div>